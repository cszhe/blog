<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="omale" />
        <meta name="copyright" content="omale" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content=", misc, " />

<meta property="og:title" content="Android开发学习笔记 "/>
<meta property="og:url" content="./androidkai-fa-xue-xi-bi-ji.html" />
<meta property="og:description" content="嵌入式 未分类 计算机技术 买了Android手机，经过了一天的尝鲜期之后，开始学习Android编程开发了。毕竟以后学院的《移动设备开发》这门课将由我来上。没办法，三十岁的老程序员又开始学习编程了。 记录一些学习笔记，持续更新中。 ================================================================ Part 1 基础部分 Android分层：Hardware -&gt; Linux Kernel -&gt; Dalvik VM -&gt; Android Libraries -&gt; App Dalvik不是标准java实现，增加了自有的指令，基于寄存器的虚拟机，很多代码来自Apache Harmony (这个和谐啊) 单个可执行文件：.class -&gt; .dex的文件。 打包后的文件：.jar -&gt; .apk（其实就是zip，这导致android汉化没难度了，连PE文件格式解析器都不用了，直接unzip + notepad就行了） Android Libraries都以android namespace开头，包括view, app, util, widget, webkit等 …" />
<meta property="og:site_name" content="Zongjian&#39;s blog" />
<meta property="og:article:author" content="omale" />
<meta property="og:article:published_time" content="2010-05-02T20:30:34+00:00" />
<meta name="twitter:title" content="Android开发学习笔记 ">
<meta name="twitter:description" content="嵌入式 未分类 计算机技术 买了Android手机，经过了一天的尝鲜期之后，开始学习Android编程开发了。毕竟以后学院的《移动设备开发》这门课将由我来上。没办法，三十岁的老程序员又开始学习编程了。 记录一些学习笔记，持续更新中。 ================================================================ Part 1 基础部分 Android分层：Hardware -&gt; Linux Kernel -&gt; Dalvik VM -&gt; Android Libraries -&gt; App Dalvik不是标准java实现，增加了自有的指令，基于寄存器的虚拟机，很多代码来自Apache Harmony (这个和谐啊) 单个可执行文件：.class -&gt; .dex的文件。 打包后的文件：.jar -&gt; .apk（其实就是zip，这导致android汉化没难度了，连PE文件格式解析器都不用了，直接unzip + notepad就行了） Android Libraries都以android namespace开头，包括view, app, util, widget, webkit等 …">

        <title>Android开发学习笔记  · Zongjian&#39;s blog
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="./theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="./theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="./theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="./theme/css/custom.css" media="screen">
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Zongjian&#39;s blog - Full Atom Feed" />
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="./"><span class=site-name>Zongjian's blog</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href=".">Home</a></li>
                            <li ><a href="./categories.html">Categories</a></li>
                            <li ><a href="./tags.html">Tags</a></li>
                            <li ><a href="./archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="./search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="./androidkai-fa-xue-xi-bi-ji.html"> Android开发学习笔记  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            
            <ul>
<li>嵌入式</li>
<li>未分类</li>
<li>计算机技术</li>
</ul>
<hr>
<p>买了Android手机，经过了一天的尝鲜期之后，开始学习Android编程开发了。毕竟以后学院的《移动设备开发》这门课将由我来上。没办法，三十岁的老程序员又开始学习编程了。</p>
<p>记录一些学习笔记，持续更新中。</p>
<p>================================================================</p>
<p>Part 1 基础部分</p>
<p>Android分层：Hardware -&gt; Linux Kernel -&gt; Dalvik VM -&gt; Android Libraries -&gt; App</p>
<p>Dalvik不是标准java实现，增加了自有的指令，基于寄存器的虚拟机，很多代码来自Apache Harmony (这个和谐啊)</p>
<ul>
<li>单个可执行文件：.class -&gt; .dex的文件。</li>
<li>打包后的文件：.jar -&gt; .apk（其实就是zip，这导致android汉化没难度了，连PE文件格式解析器都不用了，直接unzip + notepad就行了）</li>
</ul>
<p>Android Libraries都以android namespace开头，包括view, app, util, widget, webkit等。</p>
<p>Android支持多任务，系统同时可以运行6个任务，超过6个将会被杀死，长按home按钮可以看到正在运行的6个任务。</p>
<p>Android每个任务都运行在独立的linux进程中，有独立的dalvik实例，并且有独立的用户ID。（这个太狠了，比.NET啥的都狠）不过也有办法让多个任务运行在同一个instance中，共享同一个 vm instance。</p>
<p>Android的设备不可能做到iphone一样只有一个按钮，至少要有home, back和context menu三个按键。</p>
<p>盈利模式：Android Market分成 + Google Service</p>
<hr>
<p>Part 2 开发环境搭建</p>
<p>所需内容：JDK + eclipse + Android SDK + ADT(Google开发的Eclipse扩展插件)</p>
<p>编程语言：SDK支持java，NDK支持C/C++，另外开发还可以用Simple语言，类BASIC（Bill Gates内牛满面&#8230;.）</p>
<hr>
<p>Part 3 开发起步</p>
<p>一个由IDE生成的Android项目包括如下文件：</p>
<p><code>| &amp;nbsp; .classpath&lt;span class="Apple-tab-span" style="white-space: pre"&gt; &lt;/span&gt;// xml路径文件</code></p>
<p><code>| &amp;nbsp; .project&lt;span class="Apple-tab-span" style="white-space: pre"&gt; &lt;/span&gt;// xml项目文件</code></p>
<p><code>| &amp;nbsp; AndroidManifest.xml&lt;span class="Apple-tab-span" style="white-space: pre"&gt; &lt;/span&gt;// android程序配置文件</code></p>
<p><code>| &amp;nbsp; default.properties&lt;span class="Apple-tab-span" style="white-space: pre"&gt; &lt;/span&gt;// android的build system用的</code></p>
<p><code>+---.settings &amp;nbsp; // 设置信息</code></p>
<p><code>+---assets&lt;span class="Apple-tab-span" style="white-space: pre"&gt; &lt;/span&gt;// 目前暂时为空</code></p>
<p><code>+---bin&lt;span class="Apple-tab-span" style="white-space: pre"&gt; &lt;/span&gt;// 编译生成的东西</code></p>
<p><code>| &amp;nbsp; | &amp;nbsp; classes.dex&lt;span class="Apple-tab-span" style="white-space: pre"&gt; &lt;/span&gt;// delvik vm的可执行文件</code></p>
<p><code>| &amp;nbsp; | &amp;nbsp; HelloAndroid.apk&lt;span class="Apple-tab-span" style="white-space: pre"&gt; &lt;/span&gt;// android的可执行文件</code></p>
<p><code>| &amp;nbsp; | &amp;nbsp; resources.ap_&lt;span class="Apple-tab-span" style="white-space: pre"&gt; &lt;/span&gt;// 资源文件</code></p>
<p><code>| &amp;nbsp; \---com</code></p>
<p><code>| &amp;nbsp; &amp;nbsp; &amp;nbsp; \---hezongjian&lt;span class="Apple-tab-span" style="white-space: pre"&gt; &lt;/span&gt;// java编译生成的class</code></p>
<p><code>| &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; MyActivity.class</code></p>
<p><code>| &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; R.class &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;</code></p>
<p><code>+---gen&lt;span class="Apple-tab-span" style="white-space: pre"&gt; &lt;/span&gt;// R.java，类似于resource.h</code></p>
<p><code>| &amp;nbsp; \---com&lt;span class="Apple-tab-span" style="white-space: pre"&gt; &lt;/span&gt;// IDE自动管理，定义一些常量</code></p>
<p><code>| &amp;nbsp; &amp;nbsp; &amp;nbsp; \---hezongjian</code></p>
<p><code>| &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; R.java</code></p>
<p><code>| &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;</code></p>
<p><code>+---res&lt;span class="Apple-tab-span" style="white-space: pre"&gt; &lt;/span&gt;// 资源</code></p>
<p><code>| &amp;nbsp; +---drawable-hdpi&lt;span class="Apple-tab-span" style="white-space: pre"&gt; &lt;/span&gt;// 各种分辨率的资源 &amp;nbsp; &amp;nbsp;&amp;nbsp;</code></p>
<p><code>| &amp;nbsp; +---drawable-ldpi</code></p>
<p><code>| &amp;nbsp; +---drawable-mdpi &amp;nbsp; &amp;nbsp;</code></p>
<p><code>| &amp;nbsp; +---layout&lt;span class="Apple-tab-span" style="white-space: pre"&gt; &lt;/span&gt;// 界面UI布局</code></p>
<p><code>| &amp;nbsp; | &amp;nbsp; &amp;nbsp; &amp;nbsp; main.xml &amp;nbsp; &amp;nbsp; // 主界面布局xml文件</code></p>
<p><code>| &amp;nbsp; \---values</code></p>
<p><code>| &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; strings.xml &amp;nbsp; &amp;nbsp; // 字符串资源&amp;nbsp;</code></p>
<p><code>\---src&lt;span class="Apple-tab-span" style="white-space: pre"&gt; &lt;/span&gt;// 源代码目录</code></p>
<p><code>&amp;nbsp;&amp;nbsp; &amp;nbsp;\---com</code></p>
<p><code>&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;\---hezongjian</code></p>
<p><code>&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;MyActivity.java&lt;span class="Apple-tab-span" style="white-space: pre"&gt; &lt;/span&gt;// 主程序java文件</code></p>
<p>&nbsp;</p>
<p>android程序UI采用流行的xml文件定义，例如main.xml，可以在xml中设定各个控件。</p>
<p>&nbsp;</p>
<p>主java文件的内容</p>
<p>&nbsp;</p>
<p><code>public class MyActivity extends Activity { &amp;nbsp;// 从Activity继承一个自己的行动</code></p>
<p><code>&amp;nbsp;&amp;nbsp; &amp;nbsp;public void onCreate(Bundle savedInstanceState) { &amp;nbsp;// 重写onCreate</code></p>
<p><code>&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;super.onCreate(savedInstanceState);</code></p>
<p><code>&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;setContentView(R.layout.main); &amp;nbsp;// 根据xml文件来设置view的内容</code></p>
<p><code>&amp;nbsp;&amp;nbsp; &amp;nbsp;}</code></p>
<p><code>}</code></p>
<p><font class="Apple-style-span" face="monospace">下面是增加messagebox的内容，方法是用android.widget.Toast中的方法。这个对话框过一会儿自己会消失，跟Windows上的不一样。</font></p>
<p><code>public boolean onTouchEvent(MotionEvent event) {</code></p>
<p><code>Toast.makeText(this, "Hello", Toast.LENGTH_SHORT).show();</code></p>
<p><code>return super.onTouchEvent(event);</code></p>
<p><span class="Apple-style-span" style="font-family: monospace">}</span></p>
<p>或者也可以这样：</p>
<p>&nbsp;</p>
<p><code>AlertDialog.Builder alert = new AlertDialog.Builder(this)</code></p>
<p><code>alert.setTitle("Title"); &amp;nbsp;</code></p>
<p><code>alert.setMessage("Hello World");</code></p>
<p><code>alert.show();</code></p>
<p>用android.app下的AlertDialog来实现，不过AlertDialog功能比较强大，在这里是大炮打蚊子了。</p>
<p>&nbsp;</p>
<p>Android应用程序由如下几个部分构成，但都不是必须的：</p>
<ul>
<li>Activity: 就是一个window，当然和window不一样。</li>
<li>Broadcast Receiver:就是接受系统广播的东西</li>
<li>Content Provider:向其他程序提供数据，例如你是一个杀毒软件，你要向其它程序提供当前系统安全级别</li>
<li>Service: 就是一个service。</li>
</ul>
<p>Android的task就是一个Activity的stack。一个task可以调用其他程序中的activity，然后放在自己的task stack里面，这样看起来其它任务就成了自己的一部分。这个设计比树形的windows tree要新颖多了。</p>
<p>这些部分需要由Intent来组合。Intent是一个非常抽象的东西。看了很多中文解释或翻译都不明白。而英文原版网页被GFW给Ban了。无奈翻墙看developer.android.com上的东西，哎呀，再清楚明白不过了。估计需要文章再详细解释了。</p>
<p>&nbsp;</p>
<hr>
            
            
            <hr/>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2010-05-02T20:30:34+00:00">May 2, 2010</time>
            <h4>Category</h4>
            <a class="category-link" href="./categories.html#misc-ref">misc</a>
<h4>Contact</h4>
    <a href="#" title="My You can add links in your config file Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-you can add links in your config file sidebar-social-links"></i></a>
    <a href="#" title="My Another social link Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-another social link sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    
    </body>
    <!-- Theme: Elegant built for Pelican
    License : http://oncrashreboot.com/pelican-elegant -->
</html>